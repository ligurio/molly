<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Molly documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>molly</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Basic_Functions">Basic Functions </a></li>
<li><a href="#Generators__Finite_Generators">Generators: Finite Generators </a></li>
<li><a href="#Generators__Infinity_Generators">Generators: Infinity Generators </a></li>
<li><a href="#Generators__Random_sampling">Generators: Random sampling </a></li>
<li><a href="#Slicing__Subsequences">Slicing: Subsequences </a></li>
<li><a href="#Indexing">Indexing </a></li>
<li><a href="#Filtering">Filtering </a></li>
<li><a href="#Reducing__Folds">Reducing: Folds </a></li>
<li><a href="#Reducing__Predicates">Reducing: Predicates </a></li>
<li><a href="#Transformations">Transformations </a></li>
<li><a href="#Compositions">Compositions </a></li>
<li><a href="#Special_generators">Special generators </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/molly.client.html">molly.client</a></li>
  <li><a href="../modules/molly.clock.html">molly.clock</a></li>
  <li><a href="../modules/molly.thread_coroutine.html">molly.thread_coroutine</a></li>
  <li><a href="../modules/molly.thread_fiber.html">molly.thread_fiber</a></li>
  <li><a href="../modules/molly.db.html">molly.db</a></li>
  <li><strong>molly.gen</strong></li>
  <li><a href="../modules/molly.history.html">molly.history</a></li>
  <li><a href="../modules/molly.html">molly</a></li>
  <li><a href="../modules/molly.log.html">molly.log</a></li>
  <li><a href="../modules/molly.nemesis.html">molly.nemesis</a></li>
  <li><a href="../modules/molly.op.html">molly.op</a></li>
  <li><a href="../modules/molly.runner.html">molly.runner</a></li>
  <li><a href="../modules/molly.tests.html">molly.tests</a></li>
  <li><a href="../modules/molly.thread.html">molly.thread</a></li>
  <li><a href="../modules/molly.utils.html">molly.utils</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/README.md.html">README</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/sqlite-rw-register.lua.html">sqlite-rw-register.lua</a></li>
  <li><a href="../examples/sqlite-list-append.lua.html">sqlite-list-append.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>molly.gen</code></h1>
<p>Module with functions for generators.</p>
<p>


<p> One of the key pieces of a Molly test is a generators for client and
 nemesis operations. These generators will create a finite or infinite
 sequence of operations. It is often test have its own nemesis generator, but
 most likely shares a common client generator with other tests. A nemesis
 generator, for instance, might be a sequence of partition, sleep, and
 restore, repeated infinitely. A client generator will specify a random,
 infinite sequence of client operation, as well as the associated parameters
 such as durability level, the document key, the new value to write or CAS
 (Compare-And-Set), etc. When a test starts, the client generator feeds
 client operations to the client and the nemesis generator feeds operations
 to the nemesis. The test will continue until either the nemesis generator
 has completed a specified number of operations, a time limit is reached, or
 an error is thrown.</p>

<p> Example of generator that generates two operations <code>w</code> and <code>r</code>:</p>


<pre>
<span class="keyword">local</span> w = <span class="keyword">function</span>() <span class="keyword">return</span> { f = <span class="string">'w'</span>, v = <span class="global">math</span>.random(<span class="number">1</span>, <span class="number">10</span>) } <span class="keyword">end</span>
<span class="keyword">local</span> r = <span class="keyword">function</span>() <span class="keyword">return</span> { f = <span class="string">'r'</span>, v = <span class="keyword">nil</span> } <span class="keyword">end</span>
gen.rands(<span class="number">0</span>, <span class="number">2</span>):map(<span class="keyword">function</span>(x)
                        <span class="keyword">return</span> (x == <span class="number">0</span> <span class="keyword">and</span> r()) <span class="keyword">or</span>
                               (x == <span class="number">1</span> <span class="keyword">and</span> w()))
                    <span class="keyword">end</span>):take(<span class="number">100</span>)

<span class="keyword">local</span> w = <span class="keyword">function</span>(x) <span class="keyword">return</span> { f = <span class="string">'w'</span>, v = x } <span class="keyword">end</span>
gen.map(w, gen.rands(<span class="number">1</span>, <span class="number">10</span>):take(<span class="number">50</span>))
</pre>

<h3>References:</h3>

<ul>
    <li><a href="https://luafun.github.io/">Lua Functional Library documentation</a></li>
    <li><a href="https://luafun.github.io/under_the_hood.html">Lua Functional Library documentation: Under the Hood</a></li>
    <li><a href="http://lua-users.org/wiki/IteratorsTutorial">Lua iterators tutorial</a></li>
    <li><a href="http://jepsen-io.github.io/jepsen/jepsen.generator.html">Jepsen generators in a nutshell</a></li>
</ul>
</p>
    <h3>See also:</h3>
    <ul>
         <a href="../modules/molly.op.html#">molly.op</a>
    </ul>


<h2><a href="#Basic_Functions">Basic Functions </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#iter">iter (object)</a></td>
	<td class="summary">Make an iterator from the iterable object.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#each">each (function, iterator)</a></td>
	<td class="summary">Execute the function <code>fun</code> for each iteration value.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#for_each">for_each ()</a></td>
	<td class="summary">An alias for each().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#foreach">foreach ()</a></td>
	<td class="summary">An alias for each().</td>
	</tr>
</table>
<h2><a href="#Generators__Finite_Generators">Generators: Finite Generators </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#range">range ([start], stop[, step])</a></td>
	<td class="summary">The iterator to create arithmetic progressions.</td>
	</tr>
</table>
<h2><a href="#Generators__Infinity_Generators">Generators: Infinity Generators </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#duplicate">duplicate ()</a></td>
	<td class="summary">The iterator returns values over and over again indefinitely.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#xrepeat">xrepeat ()</a></td>
	<td class="summary">An alias for duplicate().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#replicate">replicate ()</a></td>
	<td class="summary">An alias for duplicate().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#tabulate">tabulate ()</a></td>
	<td class="summary">Return <code>fun(0)</code>, <code>fun(1)</code>, <code>fun(2)</code>, ...</td>
	</tr>
</table>
<h2><a href="#Generators__Random_sampling">Generators: Random sampling </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#rands">rands ()</a></td>
	<td class="summary">

</td>
	</tr>
</table>
<h2><a href="#Slicing__Subsequences">Slicing: Subsequences </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#take_n">take_n ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#take_while">take_while ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#take">take ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#drop_n">drop_n ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#drop_while">drop_while ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#drop">drop ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#span">span ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#split">split ()</a></td>
	<td class="summary">An alias for span().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#split_at">split_at ()</a></td>
	<td class="summary">An alias for span().</td>
	</tr>
</table>
<h2><a href="#Indexing">Indexing </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#index">index ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#index_of">index_of ()</a></td>
	<td class="summary">An alias for index().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#elem_index">elem_index ()</a></td>
	<td class="summary">An alias for index().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#indexes">indexes ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#indices">indices ()</a></td>
	<td class="summary">An alias for indexes().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#elem_indexes">elem_indexes ()</a></td>
	<td class="summary">An alias for indexes().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#elem_indices">elem_indices ()</a></td>
	<td class="summary">An alias for indexes().</td>
	</tr>
</table>
<h2><a href="#Filtering">Filtering </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#filter">filter ()</a></td>
	<td class="summary">Return a new iterator of those elements that satisfy the <code>predicate</code>.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#remove_if">remove_if ()</a></td>
	<td class="summary">An alias for filter().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#grep">grep ()</a></td>
	<td class="summary">If <code>regexp_or_predicate</code> is string then the parameter is used as a regular
 expression to build filtering predicate.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#partition">partition ()</a></td>
	<td class="summary">The function returns two iterators where elements do and do not satisfy the
 predicate.</td>
	</tr>
</table>
<h2><a href="#Reducing__Folds">Reducing: Folds </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#foldl">foldl ()</a></td>
	<td class="summary">The function reduces the iterator from left to right using the binary
 operator <code>accfun</code> and the initial value <code>initval</code>.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#reduce">reduce ()</a></td>
	<td class="summary">An alias to foldl().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#length">length ()</a></td>
	<td class="summary">Return a number of elements in <code>gen, param, state</code> iterator.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#totable">totable ()</a></td>
	<td class="summary">Return a new table (array) from iterated values.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#tomap">tomap ()</a></td>
	<td class="summary">Return a new table (map) from iterated values.</td>
	</tr>
</table>
<h2><a href="#Reducing__Predicates">Reducing: Predicates </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#is_prefix_of">is_prefix_of ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#is_null">is_null ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#all">all ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#every">every ()</a></td>
	<td class="summary">An alias for all().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#any">any ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#some">some ()</a></td>
	<td class="summary">An alias for any().</td>
	</tr>
</table>
<h2><a href="#Transformations">Transformations </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#map">map ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#enumerate">enumerate ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#intersperse">intersperse ()</a></td>
	<td class="summary">

</td>
	</tr>
</table>
<h2><a href="#Compositions">Compositions </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#zip">zip (...)</a></td>
	<td class="summary">Return a new iterator where i-th return value contains the i-th element
 from each of the iterators.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#cycle">cycle (iterator)</a></td>
	<td class="summary">A cycled version of an iterator.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#chain">chain ()</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#cycle_times">cycle_times (iterators)</a></td>
	<td class="summary">(TODO) Cycles between several generators on a rotating schedule.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#mix">mix ()</a></td>
	<td class="summary">(TODO) A random mixture of several generators.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#flip_flop">flip_flop (a, b)</a></td>
	<td class="summary">(TODO) Emits an operation from generator A, then B, then A again, then B again,
 etc.</td>
	</tr>
</table>
<h2><a href="#Special_generators">Special generators </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#log">log ()</a></td>
	<td class="summary">(TODO) A generator which, when asked for an operation, logs a message and yields
  nil.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#stagger">stagger (dt)</a></td>
	<td class="summary">(TODO) Operations from that generator are scheduled at uniformly random intervals
 between <code>0</code> to <code>2 * (dt seconds)</code>.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#time_limit">time_limit (duration)</a></td>
	<td class="summary">Stops generating items when time limit is exceeded.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Basic_Functions"></a>Basic Functions </h2>

    <dl class="function">
    <dt>
    <a name = "iter"></a>
    <strong>iter (object)</strong>
    </dt>
    <dd>
    Make an iterator from the iterable object.
 See <a href="https://luafun.github.io/basic.html#fun.iter">fun.iter</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">object</span>

<ul>
    <li>an iterable object (map, array, string).</li>
</ul>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an iterator triplet
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">tarantool&gt; <span class="keyword">for</span> _it, v <span class="keyword">in</span> gen.iter({<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}) <span class="keyword">do</span> <span class="global">print</span>(v) <span class="keyword">end</span>
<span class="number">1</span>
<span class="number">2</span>
<span class="number">3</span>
<span class="comment">---
</span>...

tarantool&gt; <span class="keyword">for</span> _it, v <span class="keyword">in</span> gen.iter({a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>}) <span class="keyword">do</span> <span class="global">print</span>(v) <span class="keyword">end</span>
b
a
c
<span class="comment">---
</span>...

tarantool&gt; <span class="keyword">for</span> _it, v <span class="keyword">in</span> gen.iter(<span class="string">"abc"</span>) <span class="keyword">do</span> <span class="global">print</span>(v) <span class="keyword">end</span>
a
b
c
<span class="comment">---
</span>...</pre>
    </ul>

</dd>
    <dt>
    <a name = "each"></a>
    <strong>each (function, iterator)</strong>
    </dt>
    <dd>
    Execute the function <code>fun</code> for each iteration value.
 See <a href="https://luafun.github.io/basic.html#fun.each">fun.each</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">function</span>



        </li>
        <li><span class="parameter">iterator</span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        none
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">tarantool&gt; gen.each(<span class="global">print</span>, { a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>})
b       <span class="number">2</span>
a       <span class="number">1</span>
c       <span class="number">3</span>
<span class="comment">---
</span>...</pre>
    </ul>

</dd>
    <dt>
    <a name = "for_each"></a>
    <strong>for_each ()</strong>
    </dt>
    <dd>
    An alias for each().
 See <a href="../modules/molly.gen.html#each">gen.each</a>.







</dd>
    <dt>
    <a name = "foreach"></a>
    <strong>foreach ()</strong>
    </dt>
    <dd>
    An alias for each().
 See <a href="../modules/molly.gen.html#each">gen.each</a>.







</dd>
</dl>
    <h2 class="section-header "><a name="Generators__Finite_Generators"></a>Generators: Finite Generators </h2>

    <dl class="function">
    <dt>
    <a name = "range"></a>
    <strong>range ([start], stop[, step])</strong>
    </dt>
    <dd>
    The iterator to create arithmetic progressions.
 Iteration values are generated within closed interval <code>[start, stop]</code> (i.e.
 <code>stop</code> is included). If the <code>start</code> argument is omitted, it defaults to 1 (<code>stop
 &gt; 0</code>) or to -1 (<code>stop &lt; 0</code>). If the <code>step</code> argument is omitted, it defaults to 1
 (<code>start &lt;= stop</code>) or to -1 (<code>start &gt; stop</code>). If <code>step</code> is positive, the last
 element is the largest <code>start + i * step</code> less than or equal to <code>stop</code>; if <code>step</code>
 is negative, the last element is the smallest <code>start + i * step</code> greater than
 or equal to <code>stop</code>. <code>step</code> must not be zero (or else an error is raised).
 <code>range(0)</code> returns empty iterator.
 See <a href="https://luafun.github.io/generators.html#fun.range">fun.range</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">start</span>
            <span class="types"><span class="type">number</span></span>
         – an endpoint of the interval.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">stop</span>
            <span class="types"><span class="type">number</span></span>
         – an endpoint of the interval.
        </li>
        <li><span class="parameter">step</span>
            <span class="types"><span class="type">number</span></span>
         – a step.
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an iterator
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">tarantool&gt; <span class="keyword">for</span> _it, v <span class="keyword">in</span> gen.range(<span class="number">1</span>, <span class="number">6</span>) <span class="keyword">do</span> <span class="global">print</span>(v) <span class="keyword">end</span>
<span class="number">1</span>
<span class="number">2</span>
<span class="number">3</span>
<span class="number">4</span>
<span class="number">5</span>
<span class="number">6</span>
<span class="comment">---
</span>...

tarantool&gt; <span class="keyword">for</span> _it, v <span class="keyword">in</span> gen.range(<span class="number">1</span>, <span class="number">6</span>, <span class="number">2</span>) <span class="keyword">do</span> <span class="global">print</span>(v) <span class="keyword">end</span>
<span class="number">1</span>
<span class="number">3</span>
<span class="number">5</span>
<span class="comment">---
</span>...</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="Generators__Infinity_Generators"></a>Generators: Infinity Generators </h2>

    <dl class="function">
    <dt>
    <a name = "duplicate"></a>
    <strong>duplicate ()</strong>
    </dt>
    <dd>
    The iterator returns values over and over again indefinitely.  All values
 that passed to the iterator are returned as-is during the iteration.
 See <a href="https://luafun.github.io/generators.html#fun.duplicate">fun.duplicate</a>.






    <h3>Usage:</h3>
    <ul>
        <pre class="example">tarantool&gt; gen.each(<span class="global">print</span>, gen.take(<span class="number">3</span>, gen.duplicate(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>)))
a       b       c
a       b       c
a       b       c
<span class="comment">---
</span>...</pre>
    </ul>

</dd>
    <dt>
    <a name = "xrepeat"></a>
    <strong>xrepeat ()</strong>
    </dt>
    <dd>
    An alias for duplicate().
 See <a href="../modules/molly.gen.html#duplicate">gen.duplicate</a>.







</dd>
    <dt>
    <a name = "replicate"></a>
    <strong>replicate ()</strong>
    </dt>
    <dd>
    An alias for duplicate().
 See <a href="../modules/molly.gen.html#duplicate">gen.duplicate</a>.







</dd>
    <dt>
    <a name = "tabulate"></a>
    <strong>tabulate ()</strong>
    </dt>
    <dd>
    Return <code>fun(0)</code>, <code>fun(1)</code>, <code>fun(2)</code>, ...  values indefinitely.
 See <a href="https://luafun.github.io/generators.html#fun.tabulate">fun.tabulate</a>.







</dd>
</dl>
    <h2 class="section-header "><a name="Generators__Random_sampling"></a>Generators: Random sampling </h2>

    <dl class="function">
    <dt>
    <a name = "rands"></a>
    <strong>rands ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/generators.html#fun.rands">fun.rands</a>.







</dd>
</dl>
    <h2 class="section-header "><a name="Slicing__Subsequences"></a>Slicing: Subsequences </h2>

    <dl class="function">
    <dt>
    <a name = "take_n"></a>
    <strong>take_n ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/slicing.html#fun.take_n">fun.take_n</a>.







</dd>
    <dt>
    <a name = "take_while"></a>
    <strong>take_while ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/slicing.html#fun.take_while">fun.take_while</a>.







</dd>
    <dt>
    <a name = "take"></a>
    <strong>take ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/slicing.html#fun.take">fun.take</a>.







</dd>
    <dt>
    <a name = "drop_n"></a>
    <strong>drop_n ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/slicing.html#fun.drop_n">fun.drop_n</a>.







</dd>
    <dt>
    <a name = "drop_while"></a>
    <strong>drop_while ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/slicing.html#fun.drop_while">fun.drop_while</a>.







</dd>
    <dt>
    <a name = "drop"></a>
    <strong>drop ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/slicing.html#fun.drop">fun.drop</a>.







</dd>
    <dt>
    <a name = "span"></a>
    <strong>span ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/slicing.html#fun.span">fun.span</a>.







</dd>
    <dt>
    <a name = "split"></a>
    <strong>split ()</strong>
    </dt>
    <dd>
    An alias for span().
 See <code>fun.span</code>.







</dd>
    <dt>
    <a name = "split_at"></a>
    <strong>split_at ()</strong>
    </dt>
    <dd>
    An alias for span().
 See <code>fun.span</code>.







</dd>
</dl>
    <h2 class="section-header "><a name="Indexing"></a>Indexing </h2>

    <dl class="function">
    <dt>
    <a name = "index"></a>
    <strong>index ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/indexing.html#fun.index">fun.index</a>.







</dd>
    <dt>
    <a name = "index_of"></a>
    <strong>index_of ()</strong>
    </dt>
    <dd>
    An alias for index().
 See <code>fun.index</code>.







</dd>
    <dt>
    <a name = "elem_index"></a>
    <strong>elem_index ()</strong>
    </dt>
    <dd>
    An alias for index().
 See <code>fun.index</code>.







</dd>
    <dt>
    <a name = "indexes"></a>
    <strong>indexes ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/indexing.html#fun.indexes">fun.indexes</a>.







</dd>
    <dt>
    <a name = "indices"></a>
    <strong>indices ()</strong>
    </dt>
    <dd>
    An alias for indexes().
 See <code>fun.indexes</code>.







</dd>
    <dt>
    <a name = "elem_indexes"></a>
    <strong>elem_indexes ()</strong>
    </dt>
    <dd>
    An alias for indexes().
 See <code>fun.indexes</code>.







</dd>
    <dt>
    <a name = "elem_indices"></a>
    <strong>elem_indices ()</strong>
    </dt>
    <dd>
    An alias for indexes().
 See <code>fun.indexes</code>.







</dd>
</dl>
    <h2 class="section-header "><a name="Filtering"></a>Filtering </h2>

    <dl class="function">
    <dt>
    <a name = "filter"></a>
    <strong>filter ()</strong>
    </dt>
    <dd>
    Return a new iterator of those elements that satisfy the <code>predicate</code>.
 See <a href="https://luafun.github.io/filtering.html#fun.filter">fun.filter</a>.







</dd>
    <dt>
    <a name = "remove_if"></a>
    <strong>remove_if ()</strong>
    </dt>
    <dd>
    An alias for filter().
 See <a href="../modules/molly.gen.html#filter">gen.filter</a>.







</dd>
    <dt>
    <a name = "grep"></a>
    <strong>grep ()</strong>
    </dt>
    <dd>
    If <code>regexp_or_predicate</code> is string then the parameter is used as a regular
 expression to build filtering predicate.  Otherwise the function is just an
 alias for gen.filter().
 See <a href="https://luafun.github.io/filtering.html#fun.grep">fun.grep</a>.







</dd>
    <dt>
    <a name = "partition"></a>
    <strong>partition ()</strong>
    </dt>
    <dd>
    The function returns two iterators where elements do and do not satisfy the
 predicate.
 See <a href="https://luafun.github.io/filtering.html#fun.partition">fun.partition</a>.







</dd>
</dl>
    <h2 class="section-header "><a name="Reducing__Folds"></a>Reducing: Folds </h2>

    <dl class="function">
    <dt>
    <a name = "foldl"></a>
    <strong>foldl ()</strong>
    </dt>
    <dd>
    The function reduces the iterator from left to right using the binary
 operator <code>accfun</code> and the initial value <code>initval</code>.
 See <a href="https://luafun.github.io/reducing.html#fun.foldl">fun.foldl</a>.







</dd>
    <dt>
    <a name = "reduce"></a>
    <strong>reduce ()</strong>
    </dt>
    <dd>
    An alias to foldl().
 See <a href="../modules/molly.gen.html#foldl">gen.foldl</a>.







</dd>
    <dt>
    <a name = "length"></a>
    <strong>length ()</strong>
    </dt>
    <dd>
    Return a number of elements in <code>gen, param, state</code> iterator.
 See <a href="https://luafun.github.io/reducing.html#fun.length">fun.length</a>.







</dd>
    <dt>
    <a name = "totable"></a>
    <strong>totable ()</strong>
    </dt>
    <dd>
    Return a new table (array) from iterated values.
 See <a href="https://luafun.github.io/reducing.html#fun.totable">fun.totable</a>.







</dd>
    <dt>
    <a name = "tomap"></a>
    <strong>tomap ()</strong>
    </dt>
    <dd>
    Return a new table (map) from iterated values.
 See <a href="https://luafun.github.io/reducing.html#fun.tomap">fun.tomap</a>.







</dd>
</dl>
    <h2 class="section-header "><a name="Reducing__Predicates"></a>Reducing: Predicates </h2>

    <dl class="function">
    <dt>
    <a name = "is_prefix_of"></a>
    <strong>is_prefix_of ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/reducing.html#fun.is_prefix_of">fun.is<em>prefix</em>of</a>.







</dd>
    <dt>
    <a name = "is_null"></a>
    <strong>is_null ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/reducing.html#fun.is_null">fun.is_null</a>.







</dd>
    <dt>
    <a name = "all"></a>
    <strong>all ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/reducing.html#fun.all">fun.all</a>.







</dd>
    <dt>
    <a name = "every"></a>
    <strong>every ()</strong>
    </dt>
    <dd>
    An alias for all().
 See <code>fun.all</code>.







</dd>
    <dt>
    <a name = "any"></a>
    <strong>any ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/reducing.html#fun.any">fun.any</a>.







</dd>
    <dt>
    <a name = "some"></a>
    <strong>some ()</strong>
    </dt>
    <dd>
    An alias for any().
 See <code>fun.any</code>.







</dd>
</dl>
    <h2 class="section-header "><a name="Transformations"></a>Transformations </h2>

    <dl class="function">
    <dt>
    <a name = "map"></a>
    <strong>map ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/transformations.html#fun.map">fun.map</a>.







</dd>
    <dt>
    <a name = "enumerate"></a>
    <strong>enumerate ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/transformations.html#fun.enumerate">fun.enumerate</a>.







</dd>
    <dt>
    <a name = "intersperse"></a>
    <strong>intersperse ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/transformations.html#fun.intersperse">fun.intersperse</a>.







</dd>
</dl>
    <h2 class="section-header "><a name="Compositions"></a>Compositions </h2>

    <dl class="function">
    <dt>
    <a name = "zip"></a>
    <strong>zip (...)</strong>
    </dt>
    <dd>
    Return a new iterator where i-th return value contains the i-th element
 from each of the iterators.  The returned iterator is truncated in length to
 the length of the shortest iterator. For multi-return iterators only the
 first variable is used.
 See <a href="https://luafun.github.io/compositions.html#fun.zip">fun.zip</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>

<ul>
    <li>iterators to "zip".</li>
</ul>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an iterator
    </ol>




</dd>
    <dt>
    <a name = "cycle"></a>
    <strong>cycle (iterator)</strong>
    </dt>
    <dd>
    A cycled version of an iterator.
 Make a new iterator that returns elements from <code>{gen, param, state}</code> iterator
 until the end and then "restart" iteration using a saved clone of <code>{gen,
 param, state}</code>. The returned iterator is constant space and no return values
 are buffered. Instead of that the function make a clone of the source <code>{gen,
 param, state}</code> iterator. Therefore, the source iterator must be pure
 functional to make an indentical clone. Infinity iterators are supported,
 but are not recommended.
 See <a href="https://luafun.github.io/compositions.html#fun.cycle">fun.cycle</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">iterator</span>

<ul>
    <li>an iterator.</li>
</ul>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an iterator
    </ol>




</dd>
    <dt>
    <a name = "chain"></a>
    <strong>chain ()</strong>
    </dt>
    <dd>
     See <a href="https://luafun.github.io/compositions.html#fun.chain">fun.chain</a>.







</dd>
    <dt>
    <a name = "cycle_times"></a>
    <strong>cycle_times (iterators)</strong>
    </dt>
    <dd>
    (TODO) Cycles between several generators on a rotating schedule.
 Takes a flat series of [time, generator] pairs.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">iterators</span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an iterator
    </ol>




</dd>
    <dt>
    <a name = "mix"></a>
    <strong>mix ()</strong>
    </dt>
    <dd>
    (TODO) A random mixture of several generators.  Takes a collection of generators
 and chooses between them uniformly.</p>

<p> To be precise, a mix behaves like a sequence of one-time, randomly selected
 generators from the given collection. This is efficient and prevents
 multiple generators from competing for the next slot, making it hard to
 control the mixture of operations.



    <h3>Returns:</h3>
    <ol>

        an iterator
    </ol>




</dd>
    <dt>
    <a name = "flip_flop"></a>
    <strong>flip_flop (a, b)</strong>
    </dt>
    <dd>
    (TODO) Emits an operation from generator A, then B, then A again, then B again,
 etc.  Stops as soon as any gen is exhausted.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">a</span>
            <span class="types"><span class="type">number</span></span>
         generator A.
        </li>
        <li><span class="parameter">b</span>
            <span class="types"><span class="type">number</span></span>
         generator B.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an iterator
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Special_generators"></a>Special generators </h2>

    <dl class="function">
    <dt>
    <a name = "log"></a>
    <strong>log ()</strong>
    </dt>
    <dd>
    (TODO) A generator which, when asked for an operation, logs a message and yields
  nil.  Occurs only once; use <code>repeat</code> to repeat.



    <h3>Returns:</h3>
    <ol>

        an iterator
    </ol>




</dd>
    <dt>
    <a name = "stagger"></a>
    <strong>stagger (dt)</strong>
    </dt>
    <dd>
    (TODO) Operations from that generator are scheduled at uniformly random intervals
 between <code>0</code> to <code>2 * (dt seconds)</code>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">dt</span>
            <span class="types"><span class="type">number</span></span>
         Number of seconds.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an iterator
    </ol>




</dd>
    <dt>
    <a name = "time_limit"></a>
    <strong>time_limit (duration)</strong>
    </dt>
    <dd>
    Stops generating items when time limit is exceeded.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">duration</span>
            <span class="types"><span class="type">number</span></span>
         Number of seconds.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an iterator
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">tarantool&gt;  <span class="keyword">for</span> _it, v <span class="keyword">in</span> gen.time_limit(gen.range(<span class="number">1</span>, <span class="number">100</span>), <span class="number">0.0001</span>) <span class="keyword">do</span> <span class="global">print</span>(v) <span class="keyword">end</span>
<span class="number">1</span>
<span class="number">2</span>
<span class="number">3</span>
<span class="number">4</span>
<span class="number">5</span>
<span class="number">6</span>
<span class="number">7</span>
<span class="number">8</span>
<span class="number">9</span>
<span class="number">10</span>
<span class="number">11</span>
<span class="number">12</span>
<span class="comment">---
</span>...</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2022-05-31 08:39:37 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
